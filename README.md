üöÄ REST API –ü—Ä–æ–µ–∫—Ç

–û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π REST API, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Django, Django REST
Framework –∏ PostgreSQL. –í—Å—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é Docker Compose –∏ –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Å—Ç–µ–∫ –¥–ª—è
–æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π —á–µ—Ä–µ–∑ Celery –∏ Redis.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–æ–º–æ—â—å—é JWT.

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞–º–∏ (–ú–∞—Ç–µ—Ä–∏–∞–ª—ã, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏) —á–µ—Ä–µ–∑ RESTful API.

–û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á (–æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π) —á–µ—Ä–µ–∑ Celery.

üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

–§—Ä–µ–π–º–≤–æ—Ä–∫: Django 5.x

API: Django REST Framework

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL 16.0 (–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–∞)

–ë—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π/–ö—ç—à: Redis 7 (–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω)

–§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏: Celery Worker –∏ Celery Beat

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è: Docker –∏ Docker Compose

–°–µ—Ä–≤–µ—Ä: Gunicorn (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–∑–∞–ø—É—Å–∫–∞)

üê≥ –ó–∞–ø—É—Å–∫ –ü—Ä–æ–µ–∫—Ç–∞ (Docker Compose)

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ–≥–æ —Å—Ç–µ–∫–∞ (5 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤: web, db, redis, worker, celery_beat) –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏.

1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å –∏–º–µ–Ω–µ–º .env –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

–í–ê–ñ–ù–û: –î–ª—è —Ä–∞–±–æ—Ç—ã –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏ Docker, —Ö–æ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–º–µ–Ω–∞–º–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ (db –∏ redis), –∞ –Ω–µ localhost.

SECRET-KEY=–í–ê–®_–°–ï–ö–†–ï–¢–ù–´–ô_–ö–õ–Æ–ß
POSTGRES_DB=rest_project
POSTGRES_USER=postgres
DB_HOST=db # –•–æ—Å—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ DB
DB_PORT=5432
POSTGRES_PASSWORD=–í–ê–®_–ü–ê–†–û–õ–¨_DB
STRIPE=sk_test_... # –í–∞—à —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª—é—á Stripe
REDIS_HOST=redis # –•–æ—Å—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=None

2. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–í –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è docker-compose.yml, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

docker compose up --build

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:

–°–æ–±–µ—Ä–µ—Ç –æ–±—Ä–∞–∑—ã –¥–ª—è web, worker –∏ celery_beat –∏–∑ Dockerfile.

–ó–∞–ø—É—Å—Ç–∏—Ç db –∏ redis (–ø–µ—Ä–≤—ã–º–∏).

–î–æ–∂–¥–µ—Ç—Å—è, –ø–æ–∫–∞ db –∏ redis —Å—Ç–∞–Ω—É—Ç –∑–¥–æ—Ä–æ–≤—ã–º–∏ (Healthy).

–í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ web –≤—ã–ø–æ–ª–Ω–∏—Ç:

python manage.py collectstatic

python manage.py migrate (–ø—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ PostgreSQL)

–ó–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Å–µ—Ä–≤–µ—Ä Gunicorn.

–ó–∞–ø—É—Å—Ç–∏—Ç Celery Worker –∏ Celery Beat.

3. –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:

üîó API: http://localhost:8000/

üîó –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger/Redoc: http://localhost:8000/docs/ (–∏–ª–∏ /redoc/)

üíª –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ (Development)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å Django-—Å–µ—Ä–≤–µ—Ä –±–µ–∑ Docker (—Ç–æ–ª—å–∫–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ –≤–∞—à–µ–π –º–∞—à–∏–Ω–µ), —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:

–£ –≤–∞—Å –∑–∞–ø—É—â–µ–Ω—ã PostgreSQL –∏ Redis –ª–æ–∫–∞–ª—å–Ω–æ.

–í –≤–∞—à–µ–º .env —Å—Ç–æ—è—Ç: DB_HOST=localhost –∏ REDIS_HOST=localhost.

–í—ã –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∏ Poetry Virtual Environment.

python manage.py runserver

üßπ –û—á–∏—Å—Ç–∫–∞

–ß—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –∞ —Ç–∞–∫–∂–µ —Å–µ—Ç–µ–≤—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ PostgreSQL, —Ö—Ä–∞–Ω—è—â–∏–µ—Å—è –≤
—Ç–æ–º–µ postgres_data):

docker compose down

–î–ª—è –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏, –≤–∫–ª—é—á–∞—è —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–º–æ–≤ —Å –¥–∞–Ω–Ω—ã–º–∏ –ë–î:

docker compose down -v
